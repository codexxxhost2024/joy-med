<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Joy - Voice Interface</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" />

    <style>
        /* --- Base Styles for the Wrapper Page --- */
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden; /* Prevent scrolling on the wrapper */
            background-color: #0f0f13; /* Dark background */
            font-family: "Plus Jakarta Sans", sans-serif;
        }

        /* --- Visual Overlay Styling --- */
        #voice-ui-visual-layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: transparent; /* Base transparent */
            z-index: 10; /* Above iframe, below specific controls */
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            box-sizing: border-box;
            color: #f0f0f0;
            /* Make overlay mostly non-interactive EXCEPT for holes */
            pointer-events: none;
        }

        /* --- Overlay Content Styling --- */
        .voice-overlay-top {
            width: 100%;
            display: flex;
            justify-content: center;
            margin-top: 10px;
            position: relative; /* Needed for absolute positioning inside */
            z-index: 11; /* Above iframe content */
        }

        #overlay-timer {
            background-color: rgba(40, 40, 45, 0.8);
            color: #fff;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            text-align: center;
            min-width: 100px;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .voice-overlay-center {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex-grow: 1;
            position: relative;
            z-index: 11;
        }

        #overlay-visualizer-circle {
            width: clamp(180px, 40vw, 250px);
            height: clamp(180px, 40vw, 250px);
            border-radius: 50%;
            background-image: radial-gradient(circle, rgba(173, 216, 230, 0.7) 0%, rgba(100, 149, 237, 0.5) 50%, rgba(138, 43, 226, 0.3) 100%),
                       linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(0,0,0,0.05) 100%),
                       url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" opacity="0.04"><filter id="noise"><feTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="4" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23noise)"/></svg>');
            background-blend-mode: overlay, normal;
            box-shadow: 0 0 30px rgba(173, 216, 230, 0.4);
            margin-bottom: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        #overlay-status-text {
            color: #a0a0a0;
            font-size: 1rem;
            margin-top: 10px;
        }

        .voice-overlay-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 25px;
            width: 100%;
            padding-bottom: 30px;
            position: relative;
            z-index: 11;
        }

        /* Fake buttons styling */
        .overlay-control-button {
            background-color: rgba(40, 40, 45, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #fff;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }
        .overlay-control-button .material-symbols-outlined {
            font-size: 28px;
        }
        .overlay-control-button.overlay-cancel {
            background-color: rgba(234, 67, 53, 0.7);
            border-color: rgba(234, 67, 53, 0.6);
        }
        .overlay-control-button.overlay-mic {
             /* Make the fake mic button slightly transparent so the real one shows through better */
             opacity: 0.8;
        }

        /* --- iFrame Styling --- */
        #original-app-iframe {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none; /* Remove iframe border */
            z-index: 1; /* Sit underneath the overlay elements */
            /* Make the iframe background transparent if possible */
            /* Note: This might not work if the iframe content has its own opaque background */
            background-color: transparent;
            opacity: 1; /* Keep the iframe content visible */
            /* Initially allow clicks through to iframe */
            pointer-events: auto;
        }

        /* --- Hole Punching / Button Access --- */
        /* We need to make the areas of the OVERLAY where the buttons sit TRANSPARENT to clicks */
        /* This requires knowing the approximate position */

        /* Area for Connect Button (Top Right) */
        #connect-button-hole {
            position: absolute;
            top: 30px; /* Approximate position */
            right: 25px; /* Approximate position */
            width: 110px; /* Approximate size */
            height: 45px; /* Approximate size */
            z-index: 12; /* Above the overlay's general z-index */
            pointer-events: auto; /* ALLOW clicks in this specific area */
             /* background-color: rgba(255, 0, 0, 0.1); /* DEBUG: uncomment to see hole */
        }

        /* Area for Mic Button (Bottom Center-Right) */
        #mic-button-hole {
            position: absolute;
            bottom: 35px; /* Approximate position */
            left: 50%; /* Center */
            transform: translateX(calc(-50% + 60px + 12.5px - 30px)); /* Center the hole over button */
            /* Calculation: -50% centers, + button_width + half_gap moves right, - half_hole_width centers hole */
            width: 70px; /* Approximate size (slightly larger than button) */
            height: 70px; /* Approximate size */
            z-index: 12; /* Above the overlay's general z-index */
            pointer-events: auto; /* ALLOW clicks in this specific area */
            border-radius: 50%; /* Match button shape */
            /* background-color: rgba(0, 255, 0, 0.1); /* DEBUG: uncomment to see hole */
        }

    </style>
</head>
<body>

    <!-- 1. The iFrame loading your original application -->
    <!-- Make sure 'index.html' points to your WORKING original file -->
    <iframe id="original-app-iframe" src="index.html" title="Original Application"></iframe>

    <!-- 2. The Visual Overlay Layer -->
    <div id="voice-ui-visual-layer">
        <!-- Overlay Top: Timer -->
        <div class="voice-overlay-top">
            <div id="overlay-timer">00:00 / 00:00</div>
        </div>

        <!-- Overlay Center: Visualizer and Status -->
        <div class="voice-overlay-center">
            <div id="overlay-visualizer-circle"></div>
            <div id="overlay-status-text">Listening...</div>
        </div>

        <!-- Overlay Bottom: Fake Controls -->
        <div class="voice-overlay-controls">
            <div class="overlay-control-button overlay-settings">
                <span class="material-symbols-outlined">tune</span>
            </div>
            <div class="overlay-control-button overlay-cancel">
                <span class="material-symbols-outlined">close</span>
            </div>
            <div class="overlay-control-button overlay-mic">
                <span class="material-symbols-outlined">mic</span>
            </div>
        </div>
    </div>

    <!-- 3. Clickable "Holes" - Divs positioned over the buttons -->
    <!-- These divs sit *above* the visual overlay layer and allow clicks through to the iframe below -->
    <div id="connect-button-hole"></div>
    <div id="mic-button-hole"></div>

    <!-- No separate JS needed for this wrapper file unless you want to animate the overlay -->
    <script>
        // Optional: You could add JS here later to update the #overlay-timer
        // or #overlay-status-text by communicating with the iframe,
        // or animate the #overlay-visualizer-circle.
        // For now, we keep it simple.
    </script>

</body>
</html>